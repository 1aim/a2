<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Session` trait in crate `btls`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Session">

    <title>btls::Session - Rust</title>

    <link rel="stylesheet" type="text/css" href="../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='index.html'>btls</a></p><script>window.sidebarCurrent = {name: 'Session', ty: 'trait', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content trait">
<h1 class='fqn'><span class='in-band'>Trait <a href='index.html'>btls</a>::<wbr><a class='trait' href=''>Session</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../src/btls/lib.rs.html#381-746' title='goto source code'>[src]</a></span></h1>
<pre class='rust trait'>pub trait Session: <a class='trait' href='https://doc.rust-lang.org/nightly/std/io/trait.Read.html' title='std::io::Read'>IoRead</a> + <a class='trait' href='https://doc.rust-lang.org/nightly/std/io/trait.Write.html' title='std::io::Write'>IoWrite</a> {
    fn <a href='#tymethod.set_high_water_mark' class='fnname'>set_high_water_mark</a>(&amp;mut self, amount: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>);
    fn <a href='#tymethod.set_send_threshold' class='fnname'>set_send_threshold</a>(&amp;mut self, threshold: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>);
    fn <a href='#tymethod.bytes_available' class='fnname'>bytes_available</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>;
    fn <a href='#tymethod.bytes_queued' class='fnname'>bytes_queued</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>;
    fn <a href='#tymethod.is_eof' class='fnname'>is_eof</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>;
    fn <a href='#tymethod.wants_read' class='fnname'>wants_read</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>;
    fn <a href='#tymethod.set_tx_irq' class='fnname'>set_tx_irq</a>(&amp;mut self, handler: <a class='struct' href='https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html' title='alloc::boxed::Box'>Box</a>&lt;<a class='trait' href='../btls/trait.TxIrqHandler.html' title='btls::TxIrqHandler'>TxIrqHandler</a> + <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a>&gt;);
    fn <a href='#tymethod.set_appdata_rx_fn' class='fnname'>set_appdata_rx_fn</a>(&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; handler: <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html' title='alloc::boxed::Box'>Box</a>&lt;<a class='trait' href='../btls/trait.RxAppdataHandler.html' title='btls::RxAppdataHandler'>RxAppdataHandler</a> + <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a>&gt;&gt;);
    fn <a href='#tymethod.read_tls' class='fnname'>read_tls</a>&lt;R:&nbsp;<a class='trait' href='https://doc.rust-lang.org/nightly/std/io/trait.Read.html' title='std::io::Read'>IoRead</a>&gt;(&amp;mut self, stream: &amp;mut R) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>IoResult</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;;
    fn <a href='#tymethod.submit_tls_record' class='fnname'>submit_tls_record</a>(&amp;mut self, record: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;mut [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;;
    fn <a href='#tymethod.write_tls' class='fnname'>write_tls</a>&lt;W:&nbsp;<a class='trait' href='https://doc.rust-lang.org/nightly/std/io/trait.Write.html' title='std::io::Write'>IoWrite</a>&gt;(&amp;mut self, stream: &amp;mut W) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>IoResult</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;;
    fn <a href='#tymethod.zerolatency_write' class='fnname'>zerolatency_write</a>(&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; output: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;mut [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; input: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>(</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>, <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>)</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;;
    fn <a href='#tymethod.estimate_zerolatency_size' class='fnname'>estimate_zerolatency_size</a>(&amp;self, outsize: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>;
    fn <a href='#tymethod.can_tx_data' class='fnname'>can_tx_data</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>;
    fn <a href='#tymethod.handshake_completed' class='fnname'>handshake_completed</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>;
    fn <a href='#tymethod.send_eof' class='fnname'>send_eof</a>(&amp;mut self);
    fn <a href='#tymethod.aborted_by' class='fnname'>aborted_by</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='enum' href='../btls/enum.AbortReason.html' title='btls::AbortReason'>AbortReason</a>&gt;;
    fn <a href='#tymethod.extractor' class='fnname'>extractor</a>(&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; label: &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; context: <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; buffer: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;mut [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;;
    fn <a href='#tymethod.get_alpn' class='fnname'>get_alpn</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/arc/struct.Arc.html' title='alloc::arc::Arc'>Arc</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>&gt;&gt;&gt;;
    fn <a href='#tymethod.get_server_names' class='fnname'>get_server_names</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/arc/struct.Arc.html' title='alloc::arc::Arc'>Arc</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>&gt;&gt;&gt;;
    fn <a href='#tymethod.get_sni' class='fnname'>get_sni</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/arc/struct.Arc.html' title='alloc::arc::Arc'>Arc</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>&gt;&gt;&gt;;
    fn <a href='#tymethod.connection_info' class='fnname'>connection_info</a>(&amp;self) -&gt; <a class='struct' href='../btls/struct.TlsConnectionInfo.html' title='btls::TlsConnectionInfo'>TlsConnectionInfo</a>;
    fn <a href='#tymethod.get_record_size' class='fnname'>get_record_size</a>(&amp;self, buffer: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>&gt;;
    fn <a href='#tymethod.begin_transacted_read' class='fnname'>begin_transacted_read</a>&lt;'a&gt;(&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; buffer: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;'a mut [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;'a [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;;
    fn <a href='#tymethod.end_transacted_read' class='fnname'>end_transacted_read</a>(&amp;mut self, len: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;;
}</pre><div class='docblock'><p>A TLS session.</p>

<p>This trait models an TLS session.</p>

<p>It is implemented by <a href="struct.ClientSession.html"><code>ClientSession</code></a> for TLS client, and <a href="struct.ServerSession.html"><code>ServerSession</code></a> for TLS server.</p>

<h1 id='plaintext-buffering' class='section-header'><a href='#plaintext-buffering'>Plaintext buffering:</a></h1>
<p>For reading, plaintext is buffered. You can use <code>.bytes_available()</code> to query how many bytes are available for
reading in buffer (single read produces the amount of bytes requested up to at least that limit).</p>

<p>To prevent excessive read buffering, you can use <code>.set_high_water_mark()</code> to adjust the threshold where the
session shuts off reading of the incoming TLS stream.</p>

<p>The read buffer can be accessed by using the impiled <code>Read</code> trait, and its methods (e.g <code>.read()</code>).</p>

<p>For writing, plaintext is also buffered. Now there are no automatic shutoffs, but you can use the
<code>.bytes_queued()</code> method to check how many bytes are in the buffer.</p>

<p>The write buffer can be accessed by using the impiled <code>Write</code> trait and its methods (e.g. <code>.write()</code>).</p>

<p>The writes are buffered to 16kB chunks. If you want to output in smaller chunks, use the <code>.flush()</code> method of
the <code>Write</code> trait to force output to be immediately sent. Note that this does not work before the handshake
has completed to the point that data can be sent.</p>

<p>To end the stream, use <code>.send_eof()</code>. After this is done, no further writes are allowed. On read side, <code>.read()</code>
returns <code>Ok(0)</code> forever on EOF. One can also query if read side is at EOF by using <code>.is_eof()</code>.</p>

<h1 id='ciphertext-readwrite' class='section-header'><a href='#ciphertext-readwrite'>Ciphertext read/write:</a></h1>
<p>Ciphertext read/write happens independently in both directions:</p>

<p>For read side, one can query if session wants to read data from socket by using <code>.wants_read()</code>. Then when the
socket is ready, one can use <code>.read_tls()</code> to read from the socket. Exactly one <code>.read()</code> call is performed.</p>

<p>For write side, once there is something to write, the callback registered by <code>.set_tx_irq()</code> is called. Then
after callback has arrived, calling <code>.write_tls()</code> performs exactly one <code>.write()</code> on the socket. But do not
do the <code>.write_tls()</code> call within the callback! Also note that if there is already a pending write, then
calling <code>.set_tx_irq()</code> will call the new irq handler.</p>

<p>One can call <code>.write_tls()</code> even without something to write. In this case, no <code>.write()</code> on socket happens.</p>

<h1 id='handshake' class='section-header'><a href='#handshake'>Handshake:</a></h1>
<p>When the session is first established, the sides do a handshake. This happens as number of reads and writes during
which no data is exchanged. One can query if this has completed by using <code>.handshake_completed()</code>.</p>

<p>Data can be queued for sending before the handshake is complete. This data is then sent as soon as possible.</p>

<h1 id='connection-closure' class='section-header'><a href='#connection-closure'>Connection closure:</a></h1>
<p>Upon connection termination, one can obtain the cause of termination from <code>.aborted_by()</code>. The cause can be one
of:</p>

<ul>
<li><code>MutualEof</code>: Both sides exchanged EOF signals. Connection shut down normally.</li>
<li><code>ReadError</code>: Connection was terminated by socket read error. The description of error is available as
            parameter.</li>
<li><code>WriteError</code>: Connection was terminated by socket write error. The description of error is available as
             parameter.</li>
<li><code>SentAlert</code>: Connection was terminated by this side sending a fatal TLS alert. The alert number is included
            as paramter.</li>
<li><code>RecvAlert</code>: Connection was terminated by remote side sending a fatal TLS alert. The alert number is included
            as paramter.</li>
<li><code>HandshakeError</code>: The connection was terminated by error during handshaking, or due to an error in handshake
                 protocol during running connection. The description of error is available as parameter.</li>
</ul>

<h1 id='alpn' class='section-header'><a href='#alpn'>ALPN:</a></h1>
<p>After the handshake is far enough, one can get the ALPN connection uses by using <code>.get_alpn()</code>. This method
returns <code>Some(x)</code> if ALPN has been determined. <code>x</code> can be <code>None</code> if no ALPN has been negotiated, or <code>Some(y)</code>
where <code>y</code> is the negotiated ALPN.</p>

<h1 id='server-names' class='section-header'><a href='#server-names'>Server names:</a></h1>
<p>After the handshake is far enough, one can get the list of names server authenticated as by using
<code>.get_server_names()</code>. Note that on client side, for security reasons, no results are given until server
Finished message has been received and validated (in TLS 1.2, this won&#39;t happen until the very last step before
the handshake completes, in TLS 1.3 it will happen a bit earlier).</p>
</div>
            <h2 id='required-methods'>Required Methods</h2>
            <div class='methods'>
        <h3 id='tymethod.set_high_water_mark' class='method stab '><span id='set_high_water_mark.v' class='invisible'><code>fn <a href='#tymethod.set_high_water_mark' class='fnname'>set_high_water_mark</a>(&amp;mut self, amount: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>)</code></span></h3><div class='docblock'><p>Set the receive high water mark.</p>

<p>Sets the receive high water mark of the session. If the number of pending unread bytes is at or above
the high water mark, read side will be shut down until read buffer is brought below this value.</p>

<h1 id='parameters' class='section-header'><a href='#parameters'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>amount</code>: New high water mark.</li>
</ul>
</div><h3 id='tymethod.set_send_threshold' class='method stab '><span id='set_send_threshold.v' class='invisible'><code>fn <a href='#tymethod.set_send_threshold' class='fnname'>set_send_threshold</a>(&amp;mut self, threshold: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>)</code></span></h3><div class='docblock'><p>Set send threshold.</p>

<p>This sets the send thresohld of the session. If number of pending written bytes is greater than this, the
bytes are flushed, even without explicit flush call.</p>

<h1 id='parameters-1' class='section-header'><a href='#parameters-1'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>amount</code>: New send threshold (0 enables nodelay mode).</li>
</ul>

<h1 id='notes' class='section-header'><a href='#notes'>Notes:</a></h1>
<ul>
<li>If this threshold is increased past the amount of data already buffered, the change is only made
effective on the next write. This is to ensure that TX interrupts can never be cleared except by
acknowledging them via <code>.write_tls()</code>.</li>
</ul>
</div><h3 id='tymethod.bytes_available' class='method stab '><span id='bytes_available.v' class='invisible'><code>fn <a href='#tymethod.bytes_available' class='fnname'>bytes_available</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a></code></span></h3><div class='docblock'><p>Get the number of bytes currently available for read.</p>

<p>Returns the number of bytes that are waiting in the read buffer. A read is guaranteed to return lesser
of this and read buffer size of output.</p>

<h1 id='parameters-2' class='section-header'><a href='#parameters-2'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>amount</code>: New high water mark.</li>
</ul>

<h1 id='return-value' class='section-header'><a href='#return-value'>Return value:</a></h1>
<ul>
<li>Number of bytes available.</li>
</ul>
</div><h3 id='tymethod.bytes_queued' class='method stab '><span id='bytes_queued.v' class='invisible'><code>fn <a href='#tymethod.bytes_queued' class='fnname'>bytes_queued</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a></code></span></h3><div class='docblock'><p>Get the number of bytes currently outstanding for write.</p>

<p>Returns the number of bytes that are waiting in the write buffer (does not count bytes already encrypted
for sending).</p>

<h1 id='parameters-3' class='section-header'><a href='#parameters-3'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='return-value-1' class='section-header'><a href='#return-value-1'>Return value:</a></h1>
<ul>
<li>Number of bytes waiting.</li>
</ul>
</div><h3 id='tymethod.is_eof' class='method stab '><span id='is_eof.v' class='invisible'><code>fn <a href='#tymethod.is_eof' class='fnname'>is_eof</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></span></h3><div class='docblock'><p>Is EOF?</p>

<p>Returns if the read side is at EOF, and no further input will be produced.</p>

<h1 id='parameters-4' class='section-header'><a href='#parameters-4'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='return-value-2' class='section-header'><a href='#return-value-2'>Return value:</a></h1>
<ul>
<li><code>true</code> if at EOF, <code>false</code> if more input will possibly come.</li>
</ul>

<h1 id='notes-1' class='section-header'><a href='#notes-1'>Notes:</a></h1>
<ul>
<li>This only covers normal close_notify. It does not cover abnormal termination.</li>
</ul>
</div><h3 id='tymethod.wants_read' class='method stab '><span id='wants_read.v' class='invisible'><code>fn <a href='#tymethod.wants_read' class='fnname'>wants_read</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></span></h3><div class='docblock'><p>Session wants to read from stream?</p>

<p>This determines if call to <code>read_tls()</code> would read from the stream or not.</p>

<h1 id='parameters-5' class='section-header'><a href='#parameters-5'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='return-value-3' class='section-header'><a href='#return-value-3'>Return value:</a></h1>
<ul>
<li><code>true</code> if read_tls would read from the stream, <code>false</code> if it would not.</li>
</ul>
</div><h3 id='tymethod.set_tx_irq' class='method stab '><span id='set_tx_irq.v' class='invisible'><code>fn <a href='#tymethod.set_tx_irq' class='fnname'>set_tx_irq</a>(&amp;mut self, handler: <a class='struct' href='https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html' title='alloc::boxed::Box'>Box</a>&lt;<a class='trait' href='../btls/trait.TxIrqHandler.html' title='btls::TxIrqHandler'>TxIrqHandler</a> + <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a>&gt;)</code></span></h3><div class='docblock'><p>Set the TX IRQ handler.</p>

<p>This sets a handler to be called when <code>.write_tls()</code> would write at least one segment (including when
`.write_tls() itself does not write all the data it wants to).</p>

<p>If the session wants to write data at the moment this function is called, the specified handler will be
called synchronously.,</p>

<h1 id='parameters-6' class='section-header'><a href='#parameters-6'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>handler</code>: The new handler.</li>
</ul>
</div><h3 id='tymethod.set_appdata_rx_fn' class='method stab '><span id='set_appdata_rx_fn.v' class='invisible'><code>fn <a href='#tymethod.set_appdata_rx_fn' class='fnname'>set_appdata_rx_fn</a>(&amp;mut self, handler: <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html' title='alloc::boxed::Box'>Box</a>&lt;<a class='trait' href='../btls/trait.RxAppdataHandler.html' title='btls::RxAppdataHandler'>RxAppdataHandler</a> + <a class='trait' href='https://doc.rust-lang.org/nightly/core/marker/trait.Send.html' title='core::marker::Send'>Send</a>&gt;&gt;)</code></span></h3><div class='docblock'><p>Set the application data RX handler.</p>

<p>This sets a handler to be called when application data record is received. This handler is called from
within <code>.read_tls()</code> or <code>.submit_tls_record()</code>.</p>

<p>If this handler is set, then the received data is not appended to the RX buffer, so the <code>Read</code> trait
methods can&#39;t be used when this handler is set.</p>

<h1 id='parameters-7' class='section-header'><a href='#parameters-7'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>handler</code>: The new handler. If None, the existing handler is cleared.</li>
</ul>
</div><h3 id='tymethod.read_tls' class='method stab '><span id='read_tls.v' class='invisible'><code>fn <a href='#tymethod.read_tls' class='fnname'>read_tls</a>&lt;R:&nbsp;<a class='trait' href='https://doc.rust-lang.org/nightly/std/io/trait.Read.html' title='std::io::Read'>IoRead</a>&gt;(&amp;mut self, stream: &amp;mut R) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>IoResult</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></span></h3><div class='docblock'><p>Read from stream.</p>

<p>Reads TLS stream from specified source.</p>

<h1 id='parameters-8' class='section-header'><a href='#parameters-8'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>stream</code>: The stream to read.</li>
</ul>

<h1 id='failures' class='section-header'><a href='#failures'>Failures:</a></h1>
<ul>
<li>If there is low-level read error, returns the appropriate error. These errors are not fatal.</li>
<li>If there is fatal error in TLS connection, returns that error as TlsFailure wrapped in IoError.</li>
</ul>
</div><h3 id='tymethod.submit_tls_record' class='method stab '><span id='submit_tls_record.v' class='invisible'><code>fn <a href='#tymethod.submit_tls_record' class='fnname'>submit_tls_record</a>(&amp;mut self, record: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;mut [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;</code></span></h3><div class='docblock'><p>Submit TLS record for processing.</p>

<p>Submits TLS record directly for processing, bypassing all per-record buffering. When combined with
<code>.set_appdata_rx_fn()</code>, this allows true zero-copy processing of received application data.</p>

<h1 id='parameters-9' class='section-header'><a href='#parameters-9'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>record</code>: The record to receive, including the headers. Used as scratchpad during the call.</li>
</ul>

<h1 id='failures-1' class='section-header'><a href='#failures-1'>Failures:</a></h1>
<ul>
<li>If fatal error occurs in TLS record processing, returns that error.</li>
<li>If connection is not expecting data, fails with TlsFailure::NoRecordExpected. This is not fatal.</li>
</ul>
</div><h3 id='tymethod.write_tls' class='method stab '><span id='write_tls.v' class='invisible'><code>fn <a href='#tymethod.write_tls' class='fnname'>write_tls</a>&lt;W:&nbsp;<a class='trait' href='https://doc.rust-lang.org/nightly/std/io/trait.Write.html' title='std::io::Write'>IoWrite</a>&gt;(&amp;mut self, stream: &amp;mut W) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>IoResult</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></span></h3><div class='docblock'><p>Write to stream.</p>

<p>Writes TLS stream to specified sink.</p>

<h1 id='parameters-10' class='section-header'><a href='#parameters-10'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>stream</code>: The stream to write.</li>
</ul>

<h1 id='failures-2' class='section-header'><a href='#failures-2'>Failures:</a></h1>
<ul>
<li>If there is low-level write error, returns the appropriate error. These errors are not fatal.</li>
<li>If there is fatal error in TLS connection, returns that error as TlsFailure wrapped in IoError.</li>
</ul>
</div><h3 id='tymethod.zerolatency_write' class='method stab '><span id='zerolatency_write.v' class='invisible'><code>fn <a href='#tymethod.zerolatency_write' class='fnname'>zerolatency_write</a>(&amp;mut self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; output: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;mut [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; input: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>(</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>, <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>)</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;</code></span></h3><div class='docblock'><p>Zero-latency write data into TLS stream.</p>

<p>Directly compies the plaintext data from input buffer to TLS records in output buffer. This call never
buffers the read data.</p>

<h1 id='parameters-11' class='section-header'><a href='#parameters-11'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>output</code>: The output buffer.</li>
<li><code>input</code>: The input buffer.</li>
</ul>

<h1 id='return-value-4' class='section-header'><a href='#return-value-4'>Return value:</a></h1>
<ul>
<li>Number of bytes that have been written to output buffer.</li>
<li>Number of bytes that have been read from input buffer.</li>
</ul>

<h1 id='failures-3' class='section-header'><a href='#failures-3'>Failures:</a></h1>
<ul>
<li>Any fatal error in TLS processing is returned as an error.</li>
</ul>

<h1 id='notes-2' class='section-header'><a href='#notes-2'>Notes:</a></h1>
<ul>
<li>If this function does not run into any fatal TLS error, but does not make any progress either, it
returns Ok((0, 0)), that is: Successful, 0 bytes read, 0 bytes written.</li>
</ul>
</div><h3 id='tymethod.estimate_zerolatency_size' class='method stab '><span id='estimate_zerolatency_size.v' class='invisible'><code>fn <a href='#tymethod.estimate_zerolatency_size' class='fnname'>estimate_zerolatency_size</a>(&amp;self, outsize: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a></code></span></h3><div class='docblock'><p>Get ESTIMATE for zero-latency write maximum size.</p>

<p>This does not take all factors involved in maximum write size into account. As such, it is approximate,
but should be correct most of the time, if there is no data in send buffers.</p>

<p>In practicular, the following factors cause it to return 0:</p>

<ul>
<li>Handshake not finished transmitting.</li>
<li>Any data in write buffer.</li>
<li></li>
</ul>

<h1 id='parameters-12' class='section-header'><a href='#parameters-12'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>outsize</code>: The ouput size.</li>
</ul>

<h1 id='returns' class='section-header'><a href='#returns'>Returns:</a></h1>
<ul>
<li>An estimate how much zerolatency_write() would eat output, or 0 if this can&#39;t be estimated.</li>
</ul>
</div><h3 id='tymethod.can_tx_data' class='method stab '><span id='can_tx_data.v' class='invisible'><code>fn <a href='#tymethod.can_tx_data' class='fnname'>can_tx_data</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></span></h3><div class='docblock'><p>Can send data?</p>

<h1 id='parameters-13' class='section-header'><a href='#parameters-13'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='returns-1' class='section-header'><a href='#returns-1'>Returns:</a></h1>
<ul>
<li><code>true</code> if data can be sent, <code>false</code> if not.</li>
</ul>

<h1 id='notes-3' class='section-header'><a href='#notes-3'>Notes:</a></h1>
<ul>
<li>This flag can be asserted before the handshake completes. However, one should wait until handshake
completes <code>handshake_completed()</code>, before actually sending data.</li>
</ul>
</div><h3 id='tymethod.handshake_completed' class='method stab '><span id='handshake_completed.v' class='invisible'><code>fn <a href='#tymethod.handshake_completed' class='fnname'>handshake_completed</a>(&amp;self) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></span></h3><div class='docblock'><p>Handshake complete?</p>

<h1 id='parameters-14' class='section-header'><a href='#parameters-14'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='returns-2' class='section-header'><a href='#returns-2'>Returns:</a></h1>
<ul>
<li><code>true</code> if the handshake has completed, <code>false</code> if not.</li>
</ul>

<h1 id='notes-4' class='section-header'><a href='#notes-4'>Notes:</a></h1>
<ul>
<li>One should not send data before completion of the handshake. However, one can write data before that
point, and such data can be sent on the wire before the handshake completes.</li>
</ul>
</div><h3 id='tymethod.send_eof' class='method stab '><span id='send_eof.v' class='invisible'><code>fn <a href='#tymethod.send_eof' class='fnname'>send_eof</a>(&amp;mut self)</code></span></h3><div class='docblock'><p>Send EOF.</p>

<p>Sends an EOF. After EOF has been sent, no further writes are possible. When the EOF bubbles through to
the wire side, it gets translated into close_notify alert.</p>

<h1 id='parameters-15' class='section-header'><a href='#parameters-15'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>
</div><h3 id='tymethod.aborted_by' class='method stab '><span id='aborted_by.v' class='invisible'><code>fn <a href='#tymethod.aborted_by' class='fnname'>aborted_by</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='enum' href='../btls/enum.AbortReason.html' title='btls::AbortReason'>AbortReason</a>&gt;</code></span></h3><div class='docblock'><p>Get error that aborted the TLS connection.</p>

<h1 id='parameters-16' class='section-header'><a href='#parameters-16'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='returns-3' class='section-header'><a href='#returns-3'>Returns:</a></h1>
<ul>
<li>If the connection is still up, <code>None</code>.</li>
<li>Otherwise, the error that caused the session to fail.</li>
</ul>
</div><h3 id='tymethod.extractor' class='method stab '><span id='extractor.v' class='invisible'><code>fn <a href='#tymethod.extractor' class='fnname'>extractor</a>(&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; label: &amp;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.str.html'>str</a>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; context: <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; buffer: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;mut [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;</code></span></h3><div class='docblock'><p>Extract keying material.</p>

<h1 id='parameters-17' class='section-header'><a href='#parameters-17'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
<li><code>label</code>: The label to use.</li>
<li><code>context</code>: The context to use (<code>None</code> means no context).</li>
<li><code>buffer</code>: The buffer to store to.</li>
</ul>

<h1 id='failures-4' class='section-header'><a href='#failures-4'>Failures:</a></h1>
<ul>
<li>If the parameters are invalid, fails with <code>()</code>.</li>
<li>If the handshake isn&#39;t complete, fails with <code>()</code>.</li>
<li>If EMS or TLS 1.3 has not been negotiated, fails with <code>()</code>.</li>
</ul>
</div><h3 id='tymethod.get_alpn' class='method stab '><span id='get_alpn.v' class='invisible'><code>fn <a href='#tymethod.get_alpn' class='fnname'>get_alpn</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/arc/struct.Arc.html' title='alloc::arc::Arc'>Arc</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>&gt;&gt;&gt;</code></span></h3><div class='docblock'><p>Get the APLN in effect.</p>

<h1 id='parameters-18' class='section-header'><a href='#parameters-18'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='return-value-5' class='section-header'><a href='#return-value-5'>Return value:</a></h1>
<ul>
<li>If the ALPN isn&#39;t known yet, <code>None</code>.</li>
<li>If the ALPN is known not to exist, <code>Some(None)</code>.</li>
<li>If the ALPN is known to exist, <code>Some(Some(alpn))</code>, where <code>alpn</code> is the alpn.</li>
</ul>
</div><h3 id='tymethod.get_server_names' class='method stab '><span id='get_server_names.v' class='invisible'><code>fn <a href='#tymethod.get_server_names' class='fnname'>get_server_names</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/arc/struct.Arc.html' title='alloc::arc::Arc'>Arc</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>&gt;&gt;&gt;</code></span></h3><div class='docblock'><p>Get the names server authenticated as.</p>

<h1 id='parameters-19' class='section-header'><a href='#parameters-19'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='return-value-6' class='section-header'><a href='#return-value-6'>Return value:</a></h1>
<ul>
<li>If the name list isn&#39;t known yet, <code>None</code>.</li>
<li>Otherwise, <code>Some(x)</code>, where <code>x</code> is the name list.</li>
</ul>
</div><h3 id='tymethod.get_sni' class='method stab '><span id='get_sni.v' class='invisible'><code>fn <a href='#tymethod.get_sni' class='fnname'>get_sni</a>(&amp;self) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/alloc/arc/struct.Arc.html' title='alloc::arc::Arc'>Arc</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/string/struct.String.html' title='collections::string::String'>String</a>&gt;&gt;&gt;</code></span></h3><div class='docblock'><p>Get the SNI client sent.</p>

<p>Note that SNI should only be used for routing, and for protocols that do not have host headers on
application level. Do not use it with protocols that do have host headers, e.g. HTTP.</p>

<h1 id='parameters-20' class='section-header'><a href='#parameters-20'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session.</li>
</ul>

<h1 id='return-value-7' class='section-header'><a href='#return-value-7'>Return value:</a></h1>
<ul>
<li>If the name isn&#39;t known yet, <code>None</code>.</li>
<li>Otherwise, <code>Some(x)</code>, where <code>x</code> is the name (might be <code>None</code> if no SNI was sent).</li>
</ul>
</div><h3 id='tymethod.connection_info' class='method stab '><span id='connection_info.v' class='invisible'><code>fn <a href='#tymethod.connection_info' class='fnname'>connection_info</a>(&amp;self) -&gt; <a class='struct' href='../btls/struct.TlsConnectionInfo.html' title='btls::TlsConnectionInfo'>TlsConnectionInfo</a></code></span></h3><div class='docblock'><p>Get information about TLS connection.</p>

<h1 id='return-value-8' class='section-header'><a href='#return-value-8'>Return value:</a></h1>
<ul>
<li>Information about connection.</li>
</ul>
</div><h3 id='tymethod.get_record_size' class='method stab '><span id='get_record_size.v' class='invisible'><code>fn <a href='#tymethod.get_record_size' class='fnname'>get_record_size</a>(&amp;self, buffer: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;[</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>&gt;</code></span></h3><div class='docblock'><p>Get size of first record in buffer.</p>

<h1 id='parameters-21' class='section-header'><a href='#parameters-21'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session to query.</li>
<li><code>buffer</code>: The buffer to inspect.</li>
</ul>

<h1 id='return-value-9' class='section-header'><a href='#return-value-9'>Return value:</a></h1>
<ul>
<li>If the buffer has insufficient contents to even say how large the record is, <code>None</code>.</li>
<li>Otherwise, <code>Some(size)</code>, where <code>size</code> is the size of record (including header) in bytes.</li>
</ul>
</div><h3 id='tymethod.begin_transacted_read' class='method stab '><span id='begin_transacted_read.v' class='invisible'><code>fn <a href='#tymethod.begin_transacted_read' class='fnname'>begin_transacted_read</a>&lt;'a&gt;(&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; buffer: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;'a mut [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>&amp;'a [</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u8.html'>u8</a><a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.slice.html'>]</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;</code></span></h3><div class='docblock'><p>Begin transactional application data read.</p>

<p>This method reads from unencrypted read buffer of TLS session. The data read is not removed.</p>

<h1 id='parameters-22' class='section-header'><a href='#parameters-22'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session to manipulate.</li>
<li><code>buffer</code>: Buffer to store the data read to.</li>
</ul>

<h1 id='returns-4' class='section-header'><a href='#returns-4'>Returns:</a></h1>
<ul>
<li>On success, buffer containing the data (sliced from <code>buffer</code>).</li>
<li>On failure, an error.</li>
</ul>

<h1 id='notes-5' class='section-header'><a href='#notes-5'>Notes:</a></h1>
<ul>
<li>If there is no data to be read, this just succeeds with an empty buffer.</li>
<li>Do not start multiple transactional reads at once, it won&#39;t work.</li>
</ul>

<h1 id='example' class='section-header'><a href='#example'>Example:</a></h1>
<pre><code class="language-no-run">let mut buf = [0u8; 16384];
let buf = sess.begin_transactional_read(&amp;mut buf).unwrap();
let wlen = appsock.write(buf).unwrap();
sess.end_transactional_read(wlen).unwrap();
</code></pre>
</div><h3 id='tymethod.end_transacted_read' class='method stab '><span id='end_transacted_read.v' class='invisible'><code>fn <a href='#tymethod.end_transacted_read' class='fnname'>end_transacted_read</a>(&amp;mut self, len: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/result/enum.Result.html' title='core::result::Result'>Result</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>, <a class='enum' href='../btls/error/enum.TlsFailure.html' title='btls::error::TlsFailure'>TlsFailure</a>&gt;</code></span></h3><div class='docblock'><p>End transactional application data read.</p>

<p>This method discards specified amount of data from unencrypted read buffer of TLS session.</p>

<h1 id='parameters-23' class='section-header'><a href='#parameters-23'>Parameters:</a></h1>
<ul>
<li><code>self</code>: The session to manipulate.</li>
<li><code>len</code>: The number of bytes successfully processed.</li>
</ul>

<h1 id='returns-5' class='section-header'><a href='#returns-5'>Returns:</a></h1>
<ul>
<li>On success, <code>Ok(())</code>.</li>
<li>On failure, an error.</li>
</ul>

<h1 id='notes-6' class='section-header'><a href='#notes-6'>Notes:</a></h1>
<ul>
<li>See <code>Session::begin_transactional_read()</code> for an example.</li>
</ul>
</div></div>
        <h2 id='implementors'>Implementors</h2>
        <ul class='item-list' id='implementors-list'>
    <li><code>impl Session for <a class='struct' href='../btls/struct.ClientSession.html' title='btls::ClientSession'>ClientSession</a></code></li>
<li><code>impl Session for <a class='struct' href='../btls/struct.ServerSession.html' title='btls::ServerSession'>ServerSession</a></code></li>
</ul><script type="text/javascript" async
                         src="../implementors/btls/trait.Session.js">
                 </script></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../";
        window.currentCrate = "btls";
    </script>
    <script src="../jquery.js"></script>
    <script src="../main.js"></script>
    <script defer src="../search-index.js"></script>
</body>
</html>